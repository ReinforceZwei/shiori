# Integrate i18n With React Component

## Overview

Guide and practice for integrate existing React/Next.js component to support i18n using next-intl library.

- Locale messages are in ICU format, located in `messages` folder
- English as source language, the app will automatically fallback to English when translation string is not found

## Steps

1. Import next-intl library and setup translation function

For Client Component (Non-async components)

- Import `useTranslations` from `next-intl`
- Create `t` with a namespace

```ts
import { useTranslations } from 'next-intl';

// ...

const t = useTranslations('Signin');
```

For Server Component (Async components)

- Import `getTranslations` from `next-intl/server`
- Create `t` with a namespace

```ts
import { getTranslations } from 'next-intl/server';

// ...

const t = await getTranslations('Signin');
```

2. Extract Translation String

- Extract source text
  - Source text can be React children, component props or string in js function
  - If source text is outside of React component, do not translate them (e.g. zod schema)
- Create a translation key and replace source text with `t(<key>)`
  - The key should be short and clean, in `snake_case`
  - Make sure the syntax is correct when replacing source text (from static string to function call)

```jsx
// from
<Text ta="center" size="sm" c="dimmed" mb="xl">
  Sign in to your account
</Text>
// to
<Text ta="center" size="sm" c="dimmed" mb="xl">
  {t('subtitle')}
</Text>
```

3. Add extracted string and key to message file

- Add the entry to `messages/en-US.json` message file
- Ignore other message file, they will be translated separatly

```json
{
  "Signin": {
    "subtitle": "Sign in to your account"
  }
}
```

